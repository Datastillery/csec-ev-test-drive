
<jw-modal id="pin-modal">
  <div class="pin-pane">
    <p>Please enter your PIN</p>
    <input type="password" class="pin" [(ngModel)]="pin">
    <br>
    <p class="pin-error" *ngIf="showPinError">
      Incorrect PIN, please try again.
    </p>
    <div class="close-button" (click)="closeModal('pin-modal')">
      <p>Close</p>
    </div>
    <div class="confirm-button" (click)="doCancelRide()">
      <p *ngIf="!isSubmitting">Cancel Ride</p>
      <app-spinner *ngIf="isSubmitting"></app-spinner>
    </div>
  </div>
</jw-modal>

<jw-modal id="error-modal">
  <div id="error-pane" class="error-pane">
    <h1 class="header-text">An error occurred, please try again.</h1>

    <div class="ok" (click)="closeModal('error-modal')">
      <p>OK</p>
    </div>
  </div>
</jw-modal>

<div class="schedule-screen">

  <app-header title="{{ formattedDate }}"></app-header>

  <div class="schedule-pane">
    <div *ngFor="let day of scheduledDays" class="dayPane">
      <div class="dayHeader"><h1>{{formatDate(day.date)}}</h1></div>
      <table >
        <thead>
            <tr>
              <th scope="col">Time</th>
              <th scope="col">Name</th>
              <th scope="col">Email</th>
              <th scope="col">Confirm. #</th>
              <th scope="col">Driving</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
        <tbody>
          <tr *ngFor="let slot of day.timeSlots">
            <td class="top-cell">
              <div class="time"><p class="timeText">{{ slot.formattedTime }}</p></div>
              <div class="name tablet-up-invisible" ><p>{{slot.first_name}}</p></div>
            </td>
              <td data-label="Driver Name" class="phone-invisible">{{ slot.first_name }}</td>
              <td data-label="Driver Email" class="email">{{ slot.email }}</td>
              <td data-label="Confirmation Number">{{ slot.confirmation_number }}</td>
              <td data-label="Vehicle Info">{{slot.year}} {{slot.make}} {{slot.model}}</td>
              <td>
                <div class="button-bar" id="{{slot.confirmation_number}}">
                    <div class="button-container"
                        (click)="doCheckout(slot)"
                        (disabled)="isSubmitting || slot.isSubmitting">
                      <img class="option-button" *ngIf="!slot.isSubmitting" src="assets/answer.svg">
                      <app-spinner *ngIf="slot.isSubmitting && slot.checkingOut"></app-spinner>
                    </div>
                    <div class="button-container" (click)="doCancel(slot)" (disabled)="slot.isSubmitting">
                      <img class="option-button" src="assets/cancel.svg">
                    </div>
                </div>
              </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
